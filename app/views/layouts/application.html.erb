<!DOCTYPE html>
<html>
  <head>
    <title>SmartAds</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <script src="https://js.pay.jp/v2/pay.js"></script>
    <script>
        document.addEventListener('turbo:load', function () {
            if (typeof Payjp === 'undefined') {
            console.error('Pay.jp SDK failed to load');
            return;
            }

            if (!window.payjpInstance) {
            window.payjpInstance = Payjp('<%= @payjp_public_key || Rails.application.credentials.dig(:payjp, :public_key) || ENV['PAYJP_PUBLIC_KEY'] %>');
            }
        });
    </script>
  </head>

  <body class="bg-gray-50 text-gray-800">
    <!-- Navbar -->
    <%= render "shared/navbar" %>

    <!-- Main content -->
    <main class="container mx-auto mt-28 items-center justify-center min-h-[calc(80vh-7rem)]">
      <%= yield %>
    </main>

    <!-- Alpine.js -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  </body>
</html>
